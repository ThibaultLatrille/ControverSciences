<% provide(:title, "Mes crédits") %>
<div id="my-container" class="container-fluid">
  <div class="col-md-10 col-md-offset-1 col-lg-6 col-lg-offset-3">
    <div class="panel panel-default">
      <div class="panel-body">
        Mes credits accordés aux propositions d'amélioration de controverse
      </div>
      <table id="notification-references" class="table table-striped table-hover">
        <thead>
        <tr>
          <th class="col-xs-1 center"> Crédits</th>
          <th class="col-xs-6"> Proposition</th>
          <th class="col-xs-4"> De la controverse</th>
          <th class="col-xs-1 center"> Supprimer</th>
        </tr>
        </thead>

        <tbody class="page">
        <% if !@frame_credits.any? %>
            <tr class="notification-reference">
              <td></td>
              <td> Pas encore de crédits accordés</td>
              <td></td>
              <td></td>
            </tr>
        <% else %>
            <% @frame_credits.each do |vote| %>
                <tr class="notification-reference">
                  <td class="center"> <%= vote.value %> </td>
                  <td> <%= link_to "Voir la proposition", frame_path(vote.frame_id) %>
                    par <%= link_to vote.frame_short.user_name, user_path(vote.frame_short.user_id) %>
                  </td>
                  <td> <%= link_to vote.timeline_name.html_safe, timeline_path(vote.timeline_id) %>   </td>
                  <td class="center"> <%= link_to "<span class=\"glyphicon glyphicon-trash\"> </span>".html_safe,
                                                  frame_credit_path(vote.id), method: :delete,
                                                  data:                               {confirm: "Etes vous certain ?"} %>  </td>
                </tr>
            <% end %>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="col-md-10 col-md-offset-1 col-lg-6 col-lg-offset-3">
    <div class="panel panel-default">
      <div class="panel-body">
        Mes credits accordés aux synthèses
      </div>
      <table id="notification-references" class="table table-striped table-hover">
        <thead>
        <tr>
          <th class="col-xs-1 center"> Crédits</th>
          <th class="col-xs-6"> Synthèse</th>
          <th class="col-xs-4"> De la controverse</th>
          <th class="col-xs-1 center"> Supprimer</th>
        </tr>
        </thead>

        <tbody class="page">
        <% if !@credits.any? %>
            <tr class="notification-reference">
              <td></td>
              <td> Pas encore de crédits accordés</td>
              <td></td>
              <td></td>
            </tr>
        <% else %>
            <% @credits.each do |vote| %>
                <tr class="notification-reference">
                  <td class="center"> <%= vote.value %> </td>
                  <td> <%= link_to "Voir la synthèse", summary_path(vote.summary_id) %>
                    par <%= link_to vote.summary_short.user_name, user_path(vote.summary_short.user_id) %>
                  </td>
                  <td><%= link_to vote.timeline_name.html_safe, timeline_path(vote.timeline_id) %>   </td>
                  <td class="center"> <%= link_to "<span class=\"glyphicon glyphicon-trash\"> </span>".html_safe,
                                                  credit_path(vote.id), method: :delete,
                                                  data:                         {confirm: " Vous êtes certains ?"} %>  </td>
                </tr>
            <% end %>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="col-md-10 col-md-offset-1 col-lg-6 col-lg-offset-3">
    <div class="panel panel-default">
      <div class="panel-body">
        Mes credits accordés aux analyses
      </div>
      <table id="notification-references" class="table table-striped table-hover">
        <thead>
        <tr>
          <th class="col-xs-1 center"> Crédits</th>
          <th class="col-xs-6"> Analyse</th>
          <th class="col-xs-4"> Dans la controverse</th>
          <th class="col-xs-1 center"> Supprimer</th>
        </tr>
        </thead>

        <tbody class="page">
        <% if !@votes.any? %>
            <tr class="notification-reference">
              <td></td>
              <td> Pas encore de crédits accordés</td>
              <td></td>
              <td></td>
            </tr>
        <% else %>
            <% @votes.each do |vote| %>
                <tr class="notification-reference">
                  <td class="center"> <%= vote.value %> </td>
                  <td> <%= link_to category_hash[vote.reference.category][vote.field],
                                   comment_path(vote.comment_id) %>
                    par <%= link_to vote.comment_short.user_name, user_path(vote.comment_short.user_id) %>
                    de la référence
                    <%= link_to vote.reference_title, reference_path(vote.reference_id) %>
                  </td>
                  <td> <%= link_to vote.timeline_name.html_safe, timeline_path(vote.timeline_id) %>   </td>
                  <td class="center"> <%= link_to "<span class=\"glyphicon glyphicon-trash\"> </span>".html_safe,
                                                  vote_path(vote.id), method: :delete,
                                                  data:                       {confirm: "Etes vous certain ?"} %>  </td>
                </tr>
            <% end %>
        <% end %>
        </tbody>
      </table>
    </div>
  </div>
</div>